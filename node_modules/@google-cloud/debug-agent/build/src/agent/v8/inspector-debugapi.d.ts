/**
 * Copyright 2017 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/// <reference types="node" />
import * as estree from 'estree';
import * as inspector from 'inspector';
import consoleLogLevel = require('console-log-level');
import * as stackdriver from '../../types/stackdriver';
import { ResolvedDebugAgentConfig } from '../config';
import { ScanStats } from '../io/scanner';
import { SourceMapper } from '../io/sourcemapper';
import * as utils from '../util/utils';
import * as debugapi from './debugapi';
import { V8Inspector } from './v8inspector';
export declare class BreakpointData {
    id: inspector.Debugger.BreakpointId;
    apiBreakpoint: stackdriver.Breakpoint;
    parsedCondition: estree.Node;
    locationStr: string;
    compile: null | ((src: string) => string);
    constructor(id: inspector.Debugger.BreakpointId, apiBreakpoint: stackdriver.Breakpoint, parsedCondition: estree.Node, locationStr: string, compile: null | ((src: string) => string));
}
export declare class InspectorDebugApi implements debugapi.DebugApi {
    logger: consoleLogLevel.Logger;
    config: ResolvedDebugAgentConfig;
    fileStats: ScanStats;
    breakpoints: {
        [id: string]: BreakpointData;
    };
    sourcemapper: SourceMapper;
    session: inspector.Session;
    listeners: {
        [id: string]: utils.InspectorListener;
    };
    scriptMapper: {
        [id: string]: {
            url: string;
        };
    };
    locationMapper: {
        [id: string]: stackdriver.BreakpointId[];
    };
    breakpointMapper: {
        [id: string]: stackdriver.BreakpointId[];
    };
    numBreakpoints: number;
    private inspectorOptions;
    v8Inspector: V8Inspector;
    constructor(logger: consoleLogLevel.Logger, config: ResolvedDebugAgentConfig, jsFiles: ScanStats, sourcemapper: SourceMapper);
    set(breakpoint: stackdriver.Breakpoint, cb: (err: Error | null) => void): void;
    clear(breakpoint: stackdriver.Breakpoint, cb: (err: Error | null) => void): void;
    wait(breakpoint: stackdriver.Breakpoint, callback: (err?: Error) => void): void;
    log(breakpoint: stackdriver.Breakpoint, print: (format: string, exps: string[]) => void, shouldStop: () => boolean): void;
    disconnect(): void;
    numBreakpoints_(): number;
    numListeners_(): number;
    /**
     * Internal breakpoint set function. At this point we have looked up source
     * maps (if necessary), and scriptPath happens to be a JavaScript path.
     *
     * @param {!Breakpoint} breakpoint Debug API Breakpoint object
     * @param {!MapInfoOutput|null} mapInfo A map that has a "file" attribute for
     *    the path of the output file associated with the given input file
     * @param {function(string)=} compile optional compile function that can be
     *    be used to compile source expressions to JavaScript
     * @param {function(?Error)} cb error-back style callback
     */
    private setInternal;
    private setAndStoreBreakpoint;
    private onBreakpointHit;
    private captureBreakpointData;
    private handleDebugPausedEvent;
}
